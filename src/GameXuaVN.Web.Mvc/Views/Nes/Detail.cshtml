@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@{
    Layout = "~/views/shared/frontends/_layout.cshtml";


}
@using GameXuaVN.Web.Models.Games

@model PlayingGameViewModel

<style>
    /* Container đảm bảo iframe co giãn linh hoạt */
    .game-frame-container {
        width: 100%;
        max-width: 100%; /* Đảm bảo khung chứa không vượt chiều rộng của màn hình */
        display: flex;
        justify-content: center;
        overflow: hidden; /* Ẩn phần nội dung thừa (nếu có) */
    }

        .game-frame-container iframe {
            width: 100%; /* Chiếm toàn bộ chiều rộng khung chứa */
            max-width: 100%; /* Đảm bảo không vượt quá chiều rộng của khung */
            min-width: 320px; /* Đảm bảo hiển thị tối thiểu trên thiết bị nhỏ */
            height: calc(100vw * 0.5625); /* Tỷ lệ 16:9 dựa trên chiều rộng màn hình */
            max-height: 600px; /* Giới hạn chiều cao tối đa */
            border: none;
        }
</style>
<div class="content-wrapper">
    @if (Model != null && Model.Data != null)
    {
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">@Model.Data.Name</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <!-- Main Content -->
                    <div class="col-12 col-lg-8 order-2 order-lg-1">
                        <div class="row">
                            <!-- Info Boxes -->
                            <div class="col-12 col-sm-4">
                                <div class="info-box bg-light">
                                    <div class="info-box-content">
                                        <span class="info-box-text text-center text-muted">@L("TotalPlay")</span>
                                        <span class="info-box-number text-center text-muted mb-0">@Model.Data.TotalPlay</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-4">
                                <div class="info-box bg-light">
                                    <div class="info-box-content">
                                        <span class="info-box-text text-center text-muted">@L("TotalLike")</span>
                                        <span class="info-box-number text-center text-muted mb-0">@Model.Data.TotalLike</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-4">
                                <div class="info-box bg-light">
                                    <div class="info-box-content">
                                        <span class="info-box-text text-center text-muted">@L("TotalDislike")</span>
                                        <span class="info-box-number text-center text-muted mb-0">@Model.Data.TotalDislike</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <h3 class="text-center w-100">Click vào màn hình để chơi</h3>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="game-frame-container">
                                    <iframe src="@Url.Action("Play","Nes", new {id = Model.Id})"
                                            frameborder="0"
                                            allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Sidebar -->
                    <div class="col-12 col-lg-4 order-1 order-lg-2">
                        <!-- Bạn có thể thêm nội dung Sidebar ở đây -->
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">@L("TopGame")</h3>
            </div>
            <div class="card-body">
                <div class="col-lg-9 col-md-9">
                    <div class="row">
                        @if (Model != null && Model.TopList != null && Model.TopList.Count > 0)
                        {
                            foreach (var item in Model.TopList)
                            {
                                <div class="col-lg-3 col-md-4 col-sm-6 col-12 mb-3">
                                    <div class="small-box bg-game-card text-center h-100">
                                        <div class="inner">
                                            <img src="@item.ThumbnailBase64" alt="@item.Title" class="img-fluid" style="max-height: 200px; object-fit: cover;" />
                                        </div>
                                        <a href="@Url.Action("Detail", "Nes", new { id = item.Id, title = item.Url })" class="d-block text-decoration-none">
                                            <p class="game-name mb-2">@item.Name</p>
                                        </a>
                                        <a href="@Url.Action("Detail", "Nes", new { id = item.Id, title = item.Url })" class="small-box-footer btn btn-primary">
                                            @L("Play") <i class="fas fa-gamepad"></i>
                                        </a>
                                    </div>
                                </div>
                            }
                        }
                    </div>
                </div>

            </div>
            <!-- /.card-body -->
        </div>
    }
</div>